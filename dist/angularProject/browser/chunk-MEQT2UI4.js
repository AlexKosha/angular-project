import{a as B,b as j,c as q,d as k,e as L,f as U,g as F,h as V,i as z,j as N,k as G,l as J,m as Y,n as Z,o as tt}from"./chunk-NABLK2RM.js";import{ba as K,ca as W,h as A,l as H,na as X}from"./chunk-3S3BAMWK.js";import{Ab as R,Cb as O,Gb as d,Hb as n,Ib as o,Jb as u,Nb as m,Ob as c,Qb as P,R as x,Sb as Q,Tb as y,Wa as s,aa as _,ba as w,fb as p,fc as a,gc as f,ia as M,kc as E,lb as I,m as h,ma as v,mc as $,ob as T,qb as l,ta as D,ua as S,z as b}from"./chunk-IQDTK4KP.js";var g=class t{transform(e,i=20,r="..."){return e.length>i?e.substring(0,i)+r:e}static \u0275fac=function(i){return new(i||t)};static \u0275pipe=T({name:"truncate",type:t,pure:!0})};var C=class t{constructor(e){this.http=e}baseUrl="http://localhost:3000";getQuestionsByCategory(e){return this.http.get(`${this.baseUrl}/category/${e}`).pipe(b(i=>({data:i[0]?.questions||[]})),x(500))}deleteCategoryQuestionById(e){return this.http.delete(`${this.baseUrl}/questions/${e}`)}static \u0275fac=function(i){return new(i||t)(v(A))};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})};function rt(t,e){t&1&&(n(0,"div",0),u(1,"mat-spinner"),o())}function st(t,e){t&1&&(n(0,"th",10),a(1,"\u2116"),o())}function lt(t,e){if(t&1&&(n(0,"td",11),a(1),o()),t&2){let i=e.index;s(),f(i+1)}}function mt(t,e){t&1&&(n(0,"th",10),a(1,"Question"),o())}function ct(t,e){if(t&1&&(n(0,"td",11),a(1),o()),t&2){let i=e.$implicit;s(),f(i.question)}}function pt(t,e){t&1&&(n(0,"th",10),a(1,"Answer"),o())}function dt(t,e){if(t&1&&(n(0,"td",11),a(1),E(2,"truncate"),o()),t&2){let i=e.$implicit;s(),f($(2,1,i.answer??"",50))}}function ut(t,e){t&1&&(n(0,"th",10),a(1,"Actions"),o())}function ft(t,e){if(t&1){let i=P();n(0,"td",11)(1,"button",12),Q("click",function(){let nt=D(i).$implicit,ot=y(2);return S(ot.openDeleteDialog(nt))}),a(2," Delete "),o()()}}function gt(t,e){t&1&&u(0,"tr",13)}function Ct(t,e){t&1&&u(0,"tr",14)}function _t(t,e){if(t&1&&(n(0,"table",1),m(1,2),l(2,st,2,0,"th",3)(3,lt,2,1,"td",4),c(),m(4,5),l(5,mt,2,0,"th",3)(6,ct,2,1,"td",4),c(),m(7,6),l(8,pt,2,0,"th",3)(9,dt,3,4,"td",4),c(),m(10,7),l(11,ut,2,0,"th",3)(12,ft,3,0,"td",4),c(),l(13,gt,1,0,"tr",8)(14,Ct,1,0,"tr",9),o()),t&2){let i=y();d("dataSource",i.dataSource),s(13),d("matHeaderRowDef",i.displayedColumns),s(),d("matRowDefColumns",i.displayedColumns)}}var it=class t{constructor(e,i,r){this.dialog=e;this.categoriesService=i;this.route=r}displayedColumns=["position","question","answer","actions"];dataSource=new J;category="";isLoading=!1;destroy$=new h;ngOnInit(){console.log(1),this.route.paramMap.pipe(w(this.destroy$),_(e=>(this.category=e.get("categoryId")||"",this.isLoading=!0,this.categoriesService.getQuestionsByCategory(this.category)))).subscribe(e=>{this.isLoading=!1,this.dataSource=e.data})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}deleteAnswer(e){this.categoriesService.deleteCategoryQuestionById(e).pipe(_(()=>this.categoriesService.getQuestionsByCategory(this.category))).subscribe(i=>{console.log(i),this.dataSource=i.data})}openDeleteDialog(e){this.dialog.open(Y,{width:"333px"}).afterClosed().subscribe(r=>{console.log("The dialog was closed",r),r&&(console.log("Question would be deleted.",e),this.deleteAnswer(e.id))})}static \u0275fac=function(i){return new(i||t)(p(X),p(C),p(H))};static \u0275cmp=I({type:t,selectors:[["app-category"]],decls:2,vars:1,consts:[[1,"spinner-container"],["mat-table","",1,"mat-elevation-z8","question-table",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","question"],["matColumnDef","answer"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-button","","color","warn",1,"text-uppercase",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,r){i&1&&R(0,rt,2,0,"div",0)(1,_t,15,3,"table",1),i&2&&O(r.isLoading?0:1)},dependencies:[G,B,q,F,k,j,V,L,U,z,N,W,K,tt,Z,g],styles:[".question-table[_ngcontent-%COMP%]{width:100%}.mat-column-position[_ngcontent-%COMP%]{width:32px;padding-right:24px;text-align:center}.mat-column-question[_ngcontent-%COMP%]{padding-left:16px;font-size:18px}.mat-column-actions[_ngcontent-%COMP%]{white-space:nowrap;text-align:right}.mat-column-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:8px}.mat-column-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin-right:0}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}"]})};export{it as Category};
